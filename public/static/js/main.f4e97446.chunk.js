(this.webpackJsonpchatnonymous_client=this.webpackJsonpchatnonymous_client||[]).push([[0],{166:function(e,t,n){e.exports=n.p+"static/media/Chatnonymous_Icon.6e10b6c1.png"},167:function(e,t,n){e.exports=n.p+"static/media/Chatnonymous_Text.cc20713e.png"},184:function(e,t,n){e.exports=n(307)},189:function(e,t,n){},218:function(e,t){},226:function(e,t){},228:function(e,t){},262:function(e,t){},263:function(e,t){},307:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(11),c=n.n(r),i=n(76),s=(n(189),n(12)),l=n(162),m=n.n(l),u=n(37),d=n(338),h=n(341),g=n(342),f=n(343),p=n(344),y=n(346),E=n(345),b=n(174),v=Object(b.a)({typography:{useNextVariants:!0},palette:{common:{black:"#000",white:"#fff"},background:{paper:"#fff",default:"rgba(255, 255, 255, 1)"},primary:{light:"rgba(94, 94, 94, 1)",main:"rgba(68, 68, 68, 1)",dark:"rgba(0, 0, 0, 1)",contrastText:"#fff"},secondary:{light:"rgba(173, 173, 173, 1)",main:"rgba(128, 126, 126, 1)",dark:"rgba(92, 92, 92, 1)",contrastText:"#fff"},error:{light:"rgba(233, 121, 121, 1)",main:"rgba(196, 42, 29, 1)",dark:"rgba(168, 0, 0, 1)",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}}}),x=n(66),C=n(333),k=n(349),w=n(337),j=n(339),O=n(340),T=n(166),R=n.n(T),I=n(167),M=n.n(I),N=n(169),L=n.n(N),A=n(170),J=n.n(A),F=Object(C.a)((function(e){return{topicTitle:{flexGrow:3,textAlign:"center"},userTitle:{flexGrow:1,textAlign:"end"},buttonContainer:{display:"flex",justifyContent:"space-between",width:"100px"},text:Object(x.a)({marginLeft:"10px"},e.breakpoints.down("sm"),{display:"none"})}})),S=function(e){var t=F(),n=void 0,r=void 0,c="static";return e.users&&""!==e.users&&(n=o.a.createElement("h4",{className:t.userTitle},"Users: ",e.users),r=o.a.createElement(a.Fragment,null,o.a.createElement(k.a,{title:"Invite User","aria-label":"invite-user"},o.a.createElement(w.a,{edge:"end",color:"inherit",onClick:function(){return e.onOpenModal()}},o.a.createElement(L.a,null))),o.a.createElement(k.a,{title:"Leave Room","aria-label":"leave-room"},o.a.createElement(w.a,{edge:"end",color:"inherit",onClick:function(){return e.onLeave()}},o.a.createElement(J.a,null)))),c="fixed"),o.a.createElement(d.a,{theme:v},o.a.createElement(j.a,{position:c},o.a.createElement(O.a,null,o.a.createElement("img",{src:R.a,height:"30px",alt:"Chatnonymous Icon"}),o.a.createElement("img",{src:M.a,height:"30px",alt:"Chatnonymous Text",className:t.text}),n,r)))},U=n(72),B=n.n(U),W=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1];return o.a.createElement(d.a,{theme:v},o.a.createElement(S,null),o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(h.a,{item:!0,xs:10,sm:8,lg:6},o.a.createElement(g.a,{style:{marginTop:20}},o.a.createElement(f.a,{title:"Room Control",color:"inherit",style:{textAlign:"center"}}),o.a.createElement(p.a,{style:{textAlign:"center"}},o.a.createElement("img",{src:B.a,style:{maxWidth:"200px",marginBottom:20},alt:"Chatnonymous Logo"}),o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(h.a,{item:!0,xs:6,sm:4},o.a.createElement(y.a,{onChange:function(e){c(e.target.value)},value:r,placeholder:"Enter Room Code",autoFocus:!0})),o.a.createElement(h.a,{item:!0,xs:6,sm:4},o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return function(){var t=encodeURIComponent("code"),n=encodeURIComponent("".concat(r));e.history.push("/room?".concat(t,"=").concat(n))}()},disabled:""===r},"Join Room"))),o.a.createElement(h.a,{container:!0,justify:"center",style:{marginTop:20}},o.a.createElement(h.a,{item:!0,xs:8,sm:6},o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/create-room")}},"Create New Room"))))),o.a.createElement(h.a,{container:!0,justify:"center",style:{marginTop:20}},o.a.createElement(h.a,{item:!0,xs:10,sm:8,style:{textAlign:"center"}},o.a.createElement("h1",null," Welcome!"),o.a.createElement("p",null,"Many people fear to voice themselves because they are judged by who they are and what they say. This is found in many scenarios, whether it be with an employer, a student, friends or even family members."),o.a.createElement("p",null,"Chatnonymous is an environment where people can share their thoughts together without the concern of your identity attached to these thoughts. This allows discussions to happen at the clearest level so everyone in that environment can comprehend and understand."),o.a.createElement("p",null,"All conversations are contained within the room that you join or create. No one outside of these rooms will ever have access to or be able to see them."),o.a.createElement("p",null,"None of your information or data is saved. There is no identification while in a room conversation, only colours to identify users when in a room."))))))},_=n(75),D=n.n(_),G=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),l=s[0],m=s[1];Object(a.useEffect)((function(){b()}),[]);var b=function(){c(D()({length:10,type:"url-safe"}))};return o.a.createElement(d.a,{theme:v},o.a.createElement(a.Fragment,null,o.a.createElement(S,null),o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(h.a,{item:!0,xs:10,sm:8,lg:6},o.a.createElement(g.a,{style:{marginTop:20}},o.a.createElement(f.a,{title:"Create a Room",color:"inherit",style:{textAlign:"center"}}),o.a.createElement(p.a,{style:{textAlign:"center"}},o.a.createElement("img",{src:B.a,style:{maxWidth:"200px",marginBottom:20},alt:"Chatnonymous Logo"}),o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(h.a,{item:!0,xs:6,sm:4},o.a.createElement("h2",null,"Your room code is"),o.a.createElement("h3",null,r))),o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(h.a,{item:!0,xs:6,sm:4},o.a.createElement(y.a,{onChange:function(e){m(e.target.value)},value:l,placeholder:"Enter your Room Topic",fullWidth:!0,autoFocus:!0}))),o.a.createElement(h.a,{container:!0,justify:"center",style:{marginTop:20}},o.a.createElement(h.a,{item:!0,xs:8,sm:6},o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return function(){var t=encodeURIComponent("code"),n=encodeURIComponent("".concat(r));e.socket.emit("createRoom",{code:r,topic:l}),e.history.push("/room?".concat(t,"=").concat(n))}()},disabled:""===l},"Generate Room"))),o.a.createElement(h.a,{container:!0,justify:"center",style:{marginTop:20}},o.a.createElement(h.a,{item:!0,xs:8,sm:6},o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/")}},"Back to Home"))))),o.a.createElement(h.a,{container:!0,justify:"center",style:{marginTop:20}},o.a.createElement(h.a,{item:!0,xs:10,sm:8,style:{textAlign:"center"}},o.a.createElement("p",null,"Create a room to begin your conversations! Label your topic of discussion and enter the room. Invite more users with the invite button (top right corner) when you enter the room."),o.a.createElement("p",null,"Each user will be assigned a unique colour. When all users leave, the room will be terminated. No information is recorded or saved.")))))))},H=n(171),P=n(172),V=n(78),Y=n(347),q=n(173),z=n.n(q),K=Object(C.a)((function(e){return{message:{color:"white",width:"80%",margin:"2px",padding:"1em",fontSize:"smaller",borderRadius:"10px",fontWeight:"bold"}}})),$=function(e){var t=K(),n=e.msg,a=e.isSent?"flex-end":"flex-start",r="";return e.msg.admin&&(r="Admin Message"),o.a.createElement(h.a,{container:!0,justify:a},o.a.createElement(h.a,{item:!0,xs:8},o.a.createElement("div",{className:t.message,style:{backgroundColor:n.colour}},r," @",n.time,o.a.createElement("br",null),o.a.createElement("br",null),n.text)))},Q=Object(C.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{width:200,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),textAlign:"center"},modalButtons:{display:"flex",flexDirection:"column",height:80,justifyContent:"space-between",alignItems:"center"},inputContainer:{position:"fixed",marginTop:30,bottom:0,marginBottom:20,width:"100%",marginLeft:20,backgroundColor:"white"},chatText:{width:"90%",position:"relative"},scenarioContainer:{display:"flex",alignItems:"center",flexDirection:"column",marginTop:"75px",maxHeight:"80%",marginBottom:"75px",overflow:"auto"},noRoom:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}}})),X=function(e){var t=Object(a.useRef)(!1),n=Object(a.useRef)(null),r=Q(),c=Object(a.useReducer)((function(e,t){return Object(P.a)({},e,{},t)}),{hasJoined:!1,roomCode:"",roomTopic:"",users:"",messages:[],userMessage:"",userId:"",typingMessage:"",errorMessage:"",modalOpen:!1}),i=Object(u.a)(c,2),s=i[0],l=i[1],m=Object(a.useCallback)((function(){var t,n=new URLSearchParams(e.location.search),a="",o=Object(H.a)(n.entries());try{for(o.s();!(t=o.n()).done;){var r=t.value;"code"===r[0]&&(a=r[1])}}catch(i){o.e(i)}finally{o.f()}var c=D()({length:10,type:"url-safe"});e.socket.emit("joinRoom",{code:a,userId:c})}),[e]),h=Object(a.useCallback)((function(e){l({hasJoined:!0,roomCode:e.room.code,roomTopic:e.room.topic,userId:e.userId,users:e.room.users.toString()});var t=s.messages;t.push(e.admin),l({messages:t})}),[s.messages]),g=Object(a.useCallback)((function(e){l({hasJoined:!1,errorMessage:e.message})}),[]),f=Object(a.useCallback)((function(){e.history.push("/")}),[e.history]),p=Object(a.useCallback)((function(e){var t=s.messages;t.push(e.admin),l({messages:t,users:e.userCount})}),[s.messages]),b=Object(a.useCallback)((function(e){var t=s.messages;t.push(e),l({messages:t})}),[s.messages]),x=Object(a.useCallback)((function(e){var n=e.count,a="";!0===t.current&&n--,n>0&&(a=1===n?"Someone is typing...":"".concat(n," people are typing...")),l({typingMessage:a})}),[]),C=Object(a.useCallback)((function(){e.socket.on("roomJoined",h),e.socket.on("failedJoined",g),e.socket.on("roomLeft",f),e.socket.on("onTyping",x),e.socket.on("newmessage",b),e.socket.on("onUserJoin",p),e.socket.on("userLeft",p)}),[h,g,f,x,b,p,e.socket]);return Object(a.useEffect)((function(){s.hasJoined&&n.current.scrollIntoView({behavior:"smooth"})})),Object(a.useEffect)((function(){C(),m()}),[m,C]),o.a.createElement(d.a,{theme:v},s.hasJoined?o.a.createElement(o.a.Fragment,null,o.a.createElement(S,{users:s.users,onLeave:function(){console.log("LEFT"),e.socket.emit("leaveRoom")},onOpenModal:function(){l({modalOpen:!0})}}),o.a.createElement("div",{className:r.scenarioContainer},s.messages.map((function(e,t){return o.a.createElement($,{msg:e,key:t,isSent:e.userId===s.userId})}))),o.a.createElement("div",{style:{float:"left",clear:"both"},ref:n}),o.a.createElement("div",null,o.a.createElement(V.a,{color:"primary"},s.typingMessage)),o.a.createElement("div",{className:r.inputContainer},o.a.createElement(y.a,{variant:"outlined",onChange:function(n){l({userMessage:n.target.value}),!1===t.current?(t.current=!0,e.socket.emit("typing",{isTyping:!0},(function(e){}))):""===n.target.value&&(t.current=!1,e.socket.emit("typing",{isTyping:!1},(function(e){})))},placeholder:"type something here",autoFocus:!0,className:r.chatText,value:s.userMessage,onKeyPress:function(t){return"Enter"===t.key?void(""!==s.userMessage&&(e.socket.emit("message",{text:s.userMessage},(function(e){})),e.socket.emit("typing",{isTyping:!1},(function(e){})),l({isTyping:!1,userMessage:""}))):null}})),o.a.createElement(Y.a,{open:s.modalOpen,onClose:function(){l({modalOpen:!1})},className:r.modal},o.a.createElement("div",{className:r.paper},o.a.createElement("h2",null,"Room Code ",s.roomCode),o.a.createElement("p",null,window.location.href),o.a.createElement("div",{className:r.modalButtons},o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=window.location.href,t=encodeURI("Chatnonymous Room Invite"),n=encodeURI("You have been invited to a Chatnonmyous Room with the topic: ".concat(s.roomTopic,"\n\nClick the following link to enter the room:\n").concat(e,"\n\nFrom,\nChatnonymous Team")),a="mailto:?subject=".concat(t,"&body=").concat(n);window.open(a)}()}},"Email Link"),o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=window.location.href;z()(e)}()}},"Copy Link"))))):o.a.createElement(o.a.Fragment,null,o.a.createElement(S,null),o.a.createElement("div",{className:r.noRoom},o.a.createElement("h2",null,"No Room Found"),o.a.createElement("h3",null,"Make sure you enter in the correct Room Code."))))},Z=m()(),ee=function(){return o.a.createElement(i.a,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",render:function(e){return o.a.createElement(W,Object.assign({},e,{socket:Z}))}}),o.a.createElement(s.a,{path:"/create-room",render:function(e){return o.a.createElement(G,Object.assign({},e,{socket:Z}))}}),o.a.createElement(s.a,{path:"/room",render:function(e){return o.a.createElement(X,Object.assign({},e,{socket:Z}))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(i.a,null,o.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){e.exports=n.p+"static/media/Chatnonymous_Dark.f834275c.png"}},[[184,1,2]]]);
//# sourceMappingURL=main.f4e97446.chunk.js.map